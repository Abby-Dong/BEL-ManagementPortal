<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEL Management Portal</title>
    
    <!-- External Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
    <!-- Date range picker (flatpickr) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <!-- Local Styles -->
    <link rel="stylesheet" href="src/css/main.css">
</head>
<body>
    <!-- Header -->
    <header class="bel-header">
        <i class="bel-hamburger-menu fas fa-bars" id="bel-hamburger-btn"></i>
        <div class="bel-header-content">
            <div class="bel-sidebar-logo">
                <img src="https://irp.cdn-website.com/56869327/dms3rep/multi/iotmart-logo.svg" alt="logo">
                <span>BEL Portal</span>
            </div>
            <div class="bel-header-right">
                <!-- Header Filters -->
                <div class="bel-header-filters">
                    <select id="header-year-filter" class="bel-form-control bel-form-select bel-select--compact">
                        <option value="all">All Years</option>
                        <!-- Years will be populated by JavaScript -->
                    </select>
                    <select id="header-region-filter" class="bel-form-control bel-form-select bel-select--compact">
                        <option value="all">All Regions</option>
                        <option value="AAU / NZ">AAU / NZ</option>
                        <option value="ASEAN">ASEAN</option>
                        <option value="China">China</option>
                        <option value="Europe">Europe</option>
                        <option value="India">India</option>
                        <option value="Japan">Japan</option>
                        <option value="Korea">Korea</option>
                        <option value="LATAM">LATAM</option>
                        <option value="ME&A">ME&A</option>
                        <option value="North America">North America</option>
                        <option value="Taiwan">Taiwan</option>
                        <option value="Russia & CIS">Russia & CIS</option>
                        <option value="Others">Others</option>
                    </select>
                </div>
                
                <div class="bel-notification-bell" id="notification-bell">
                    <i class="fas fa-bell"></i>
                    <div class="dot"></div>
                </div>
                <div class="bel-notification-panel" id="notification-panel">
                    <div class="bel-notification-header">Announcements</div>
                    <ul class="bel-notification-list">
                        <!-- Notifications will be populated by JavaScript -->
                    </ul>
                </div>
                <div class="bel-user-profile">
                    <img src="" alt="User Avatar" style="display: none;">
                </div>
                <div class="user-profile-panel" id="user-profile-panel">
                    <div class="panel-content">
                        <div class="user-info">
                            <span class="user-name">Abby Dong</span>
                            <span class="user-email">Abby.dong@advantech.com</span>
                        </div>
                        <div class="user-level">
                            <span class="bel-badge admin">Admin</span>
                        </div>
                        <hr class="divider">
                        <a href="#" class="panel-link">Log Out</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <main class="bel-container">
        <!-- Sidebar Navigation -->
        <aside class="bel-sidebar" id="bel-sidebar">
            <div class="bel-sidebar-menu-title">MAIN MENU</div>
            <nav class="bel-sidebar-nav">
                <a href="#dashboard" class="bel-sidebar-nav-link active">
                    <i class="fas fa-tachometer-alt fa-fw"></i>
                    <span>Sales Performance</span>
                </a>
                <a href="#payouts-order" class="bel-sidebar-nav-link">
                    <i class="fas fa-wallet fa-fw"></i>
                    <span>Payouts & Orders</span>
                </a>
                <a href="#Account-Management" class="bel-sidebar-nav-link">
                    <i class="fas fa-user-circle fa-fw"></i>
                    <span>Account Management</span>
                </a>
            </nav>
            <div class="bel-sidebar-menu-title">HELP & SUPPORT</div>
            <nav class="bel-sidebar-nav">
                <a href="#contact-support" class="bel-sidebar-nav-link">
                    <i class="fas fa-headset fa-fw"></i>
                    <span>Respond to Leader</span>
                </a>
                <a href="#content" class="bel-sidebar-nav-link">
                    <i class="fas fa-folder fa-fw"></i>
                    <span>Publish Resource</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <div class="bel-main-content" id="bel-main-content">
            
            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <h1 class="bel-h1">Sales Performance Dashboard</h1>
                
                <!-- Summary Statistics Cards -->
                <div class="bel-stats-cards grid-cols-3">
                    <!-- Cards will be populated by JavaScript -->
                </div>
                
                <!-- BEL Performance by Level -->
                <h3 class="bel-h3">Level Distribution & Performance</h3>
                <div class="bel-panel">
                    <div class="performance-grid">
                        <div>
                            <div class="chart-container pie-chart-container" >
                                <canvas id="level-pie-chart"></canvas>
                            </div>
                        </div>

                        <div class="flex-center" style="display: flex; flex-direction: column;">
                            <div class="view-switcher" id="payout-view-switcher">
                               <button class="view-btn active" data-view="chart">
                                   <i class="fas fa-chart-bar"></i> Chart View
                               </button>
                               <button class="view-btn" data-view="table">
                                   <i class="fas fa-list"></i> List View
                               </button>
                            </div>
                            
                            <div class="scrollable-table-container view-content"  id="performance-table-view" style="display: none; height:214px; margin-top: 43px; margin-bottom: 43px;">
                                <table class="bel-table">
                                    <thead>
                                        <tr>
                                            <th data-sortable data-type="string">Level</th>
                                            <th data-sortable data-type="number">Total Clicks</th>
                                            <th data-sortable data-type="number">Revenue</th>
                                            <th data-sortable data-type="number">Orders</th>
                                            <th data-sortable data-type="number">C2O CVR (%)</th>
                                            <th data-sortable data-type="number">AOV</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Performance data will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <div class="view-content" id="performance-chart-view" style="display: block; width: 100%; height: 300px;">
                                <canvas id="performance-percentage-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Categories & Products Sales Effectiveness -->
                <div class="section-title">
                    <h3>Categories & Products Sales Effectiveness</h3>
                </div>
                <div class="bel-panel">
                    <div class="product-sales-grid">
                         <div>
                            <h4 style="font-size: 1rem; margin-bottom: 10px;">Top 5 Product Category Analysis</h4>
                            <div class="chart-container bar-chart-container">
                                <canvas id="product-category-chart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 style="font-size: 1rem; margin-bottom: 10px;">Top 20 Products</h4>
                            <div class="scrollable-table-container" style="max-height: 350px;">
                                <table class="bel-table" style="margin-top:0;">
                                    <thead>
                                        <tr>
                                            <th data-sortable data-type="number" style="width:24px;">Rank</th>
                                            <th data-sortable data-type="string" style="width:160px;">Product</th>
                                            <th data-sortable data-type="number">Price</th>
                                            <th data-sortable data-type="number">Qty</th>
                                            <th data-sortable data-type="number">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Product data will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Filters Panel -->
                <div class="section-title">
                    <h3>Top 10 Performance Leaderboard</h3>
                </div>
               <!-- Filters Panel -->
                <div class="bel-panel">
                    <h3 class="bel-h3" style="margin-top:0; font-size: 1.25rem;">Filters</h3>
                    <form id="bel-filters" class="filters-grid">
                        <div class="bel-form-group">
                            <label for="f-referral-id">Referral ID</label>
                            <div class="search-input-container">
                                <input id="f-referral-id" class="bel-form-control bel-form-input" type="search" placeholder="Search Referral ID" autocomplete="off" />
                                <div id="search-suggestions-id" class="search-suggestions"></div>
                            </div>
                        </div>
                        <div class="bel-form-group">
                            <label for="f-name">Name</label>
                            <div class="search-input-container">
                                <input id="f-name" class="bel-form-control bel-form-input" type="search" placeholder="Search Name" autocomplete="off" />
                                <div id="search-suggestions-name" class="search-suggestions"></div>
                            </div>
                        </div>
                        <div class="bel-form-group">
                            <label for="f-level">Level</label>
                            <select id="f-level" class="bel-form-control bel-form-select">
                                <option value="">All Levels</option>
                                <option value="Builder">Builder</option>
                                <option value="Enabler">Enabler</option>
                                <option value="Exploder">Exploder</option>
                                <option value="Leader">Leader</option>
                            </select>
                        </div>
                        <div class="bel-form-group">
                            <label for="f-region">Region</label>
                            <select id="f-region" class="bel-form-control bel-form-select">
                                <option value="">All Regions</option>
                                <option value="AAU / NZ">AAU / NZ</option>
                                <option value="ASEAN">ASEAN</option>
                                <option value="China">China</option>
                                <option value="Europe">Europe</option>
                                <option value="India">India</option>
                                <option value="Japan">Japan</option>
                                <option value="Korea">Korea</option>
                                <option value="LATAM">LATAM</option>
                                <option value="ME&A">ME&A</option>
                                <option value="North America">North America</option>
                                <option value="Taiwan">Taiwan</option>
                                <option value="Russia & CIS">Russia & CIS</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>
                        <div class="bel-form-group">
                            <label for="f-country">Country</label>
                            <select id="f-country" class="bel-form-control bel-form-select">
                                <option value="">All Countries</option>
                                <!-- Countries will be populated by JavaScript -->
                            </select>
                        </div>
                        <div class="bel-form-group">
                            <label for="f-activity">Activity</label>
                            <select id="f-activity" class="bel-form-control bel-form-select">
                                <option value="">Any activity</option>
                                <option value="clicks">Has clicks only</option>
                                <option value="orders">Has orders</option>
                                <option value="none">No activity</option>
                            </select>
                        </div>
                    </form>
                    <!-- Batch Actions -->
                    <div class="batch-actions">
                        <div class="left">
                            <input type="checkbox" id="select-all-page" style="transform: scale(1.2); margin-right: 4px;"/>
                            <label for="select-all-page">Select all</label>
                            <span class="text-muted" id="selected-count">0 selected</span>
                        </div>
                        <div class="right">
                            <button class="bel-btn secondary" id="export-csv">
                                <i class="fas fa-file-export"></i> Export CSV
                            </button>
                        </div>
                    </div>

                    <!-- BEL Table -->
                    <div class="scrollable-table-container">
                        <table class="bel-table" id="bel-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="th-select" aria-label="Select all on this page" /></th>
                                    <th data-sortable="id">Referral ID</th>
                                    <th data-sortable="name">Name</th>
                                    <th data-sortable="level">Level</th>
                                    <th data-sortable="clicks30" style="text-align: right;">Clicks</th>
                                    <th data-sortable="orders30" style="text-align: right;">Orders</th>
                                    <th data-sortable="revenue30" style="text-align: right;">Revenue</th>
                                    <th style="text-align: right;">C2O CVR (%)</th>
                                    <th style="text-align: right;">AOV</th>
                                    <th data-sortable="region">Region</th>
                                    <th data-sortable="country">Country</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- BEL data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination-bar">
                        <div class="rows-select">
                            <label for="rows-per-page">Rows per page</label>
                            <select id="rows-per-page" class="bel-form-control bel-form-select" style="width: 70px;">
                                <option selected>10</option>
                                <option>20</option>
                                <option>50</option>
                            </select>
                        </div>
                        <div class="pagination-controls">
                            <span id="range-label" class="text-muted">0–0 of 0</span>
                            <button class="bel-btn secondary" id="prev-page" aria-label="Previous page">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="bel-btn secondary" id="next-page" aria-label="Next page">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Account Management Section -->
            <div id="Account-Management" class="content-section">
                <h1 class="bel-h1">Account Management</h1>
                
                <!-- View Switcher -->
                <div class="view-switcher" id="account-view-switcher" style="margin-bottom: 16px;">
                    <button class="view-btn active" data-view="grid">
                        <i class="fas fa-th"></i> Grid View
                    </button>
                    <button class="view-btn" data-view="list">
                        <i class="fas fa-list"></i> List View
                    </button>
                </div>
                
                <!-- Filters Panel -->
                <div class="bel-panel" style="margin-bottom: 16px;">
                    <h3 class="bel-h3" style="margin-top:0; font-size: 1.25rem;">Filters</h3>
                    <form id="account-filters" class="filters-grid">
                        <div class="bel-form-group">
                            <label for="account-f-referral-id">Referral ID</label>
                            <div class="search-input-container">
                                <input id="account-f-referral-id" class="bel-form-control bel-form-input" type="search" placeholder="Search Referral ID" autocomplete="off" />
                                <div id="account-search-suggestions-id" class="search-suggestions"></div>
                            </div>
                        </div>
                        <div class="bel-form-group">
                            <label for="account-f-name">Name</label>
                            <div class="search-input-container">
                                <input id="account-f-name" class="bel-form-control bel-form-input" type="search" placeholder="Search Name" autocomplete="off" />
                                <div id="account-search-suggestions-name" class="search-suggestions"></div>
                            </div>
                        </div>
                        <div class="bel-form-group">
                            <label for="account-f-level">Level</label>
                            <select id="account-f-level" class="bel-form-control bel-form-select">
                                <option value="">All Levels</option>
                                <option value="Builder">Builder</option>
                                <option value="Enabler">Enabler</option>
                                <option value="Exploder">Exploder</option>
                                <option value="Leader">Leader</option>
                            </select>
                        </div>
                        <div class="bel-form-group">
                            <label for="account-f-region">Region</label>
                            <select id="account-f-region" class="bel-form-control bel-form-select">
                                <option value="">All Regions</option>
                                <option value="AAU / NZ">AAU / NZ</option>
                                <option value="ASEAN">ASEAN</option>
                                <option value="China">China</option>
                                <option value="Europe">Europe</option>
                                <option value="India">India</option>
                                <option value="Japan">Japan</option>
                                <option value="Korea">Korea</option>
                                <option value="LATAM">LATAM</option>
                                <option value="ME&A">ME&A</option>
                                <option value="North America">North America</option>
                                <option value="Taiwan">Taiwan</option>
                                <option value="Russia & CIS">Russia & CIS</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>
                        <div class="bel-form-group">
                            <label for="account-f-sort">Sort By</label>
                            <select id="account-f-sort" class="bel-form-control bel-form-select">
                                <option value="name">By Name</option>
                                <option value="id">By ID</option>
                                <option value="level">By Level</option>
                                <option value="orders">By Orders</option>
                                <option value="clicks">By Clicks</option>
                                <option value="revenue">By Revenue</option>
                            </select>
                        </div>
                    </form>
                </div>
                
                <!-- Account Cards Container -->
                <div class="view-container active" id="account-grid-view">
                    <div id="account-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <!-- Cards will be dynamically inserted here by JavaScript -->
                    </div>
                    <!-- Grid Pagination -->
                    <div class="pagination-bar" style="margin-top: 20px;">
                        <div class="rows-select">
                            <label for="account-grid-rows-per-page">Cards per page</label>
                            <select id="account-grid-rows-per-page" class="bel-form-control bel-form-select" style="width: 70px;">
                                <option>6</option>
                                <option selected>12</option>
                                <option>24</option>
                            </select>
                        </div>
                        <div class="pagination-controls">
                            <span id="account-grid-range-label" class="text-muted">0–0 of 0</span>
                            <button class="bel-btn secondary" id="account-grid-prev-page" aria-label="Previous page">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="bel-btn secondary" id="account-grid-next-page" aria-label="Next page">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Account List Container -->
                <div class="view-container" id="account-list-view" style="display: none;">
                    <div class="bel-panel" style="padding: 0;">
                        <div class="scrollable-table-container">
                            <table class="bel-table" id="account-list-table">
                                <thead>
                                    <tr>
                                        <th data-sortable="referralId">Referral ID</th>
                                        <th data-sortable="name">Name</th>
                                        <th data-sortable="level">Level</th>
                                        <th data-sortable="clicks30" style="text-align: right;">Clicks</th>
                                        <th data-sortable="orders30" style="text-align: right;">Orders</th>
                                        <th data-sortable="revenue30" style="text-align: right;">Revenue</th>
                                        <th data-sortable="c20cvr" style="text-align: right;">C2O CVR (%)</th>
                                        <th data-sortable="aov" style="text-align: right;">AOV</th>
                                        <th data-sortable="region">Region</th>
                                        <th data-sortable="country">Country</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- List items will be dynamically inserted here by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- List Pagination -->
                    <div class="pagination-bar" style="margin-top: 16px;">
                        <div class="rows-select">
                            <label for="account-list-rows-per-page">Rows per page</label>
                            <select id="account-list-rows-per-page" class="bel-form-control bel-form-select" style="width: 70px;">
                                <option>5</option>
                                <option selected>10</option>
                                <option>20</option>
                            </select>
                        </div>
                        <div class="pagination-controls">
                            <span id="account-list-range-label" class="text-muted">0–0 of 0</span>
                            <button class="bel-btn secondary" id="account-list-prev-page" aria-label="Previous page">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="bel-btn secondary" id="account-list-next-page" aria-label="Next page">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payouts & Orders Section -->
            <div id="payouts-order" class="content-section">
                <!-- Content will be dynamically injected by JavaScript -->
            </div>

            <!-- Content Section -->
            <div id="content" class="content-section">
                <!-- Content will be dynamically injected by JavaScript -->
            </div>

            <!-- Contact Support Section -->
            <div id="contact-support" class="content-section">
                <!-- Content will be dynamically injected by JavaScript -->
            </div>
        </div>
    </main>
    
    <!-- BEL Details Modal -->
    <div class="modal-overlay" id="bel-details-modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <div class="bel-profile-identifier">
                    <img src="" alt="User Avatar" class="modal-avatar-small" style="display: none;">
                    <div class="bel-profile-info">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <h3 id="modal-bel-name">Maxwell Walker</h3>
                            <span id="modal-bel-level-badge" class="bel-badge exploder">Exploder</span>
                        </div>
                        <p style="margin-top:4px" id="modal-bel-info">Referral ID: KTWADVANT | Email: maxwell.walker@advantech.com</p>
                    </div>
                </div>
                <button class="close-button">&times;</button>
            </div>

            <div class="modal-body-grid" style="height: 600px;">
                <div class="modal-left-pane">
                    <div class="tab-navigation">
                        <button class="tab-link active" data-tab="overview">
                            <i class="fas fa-chart-line"></i> Performance
                        </button>
                        <button class="tab-link" data-tab="payouts">
                            <i class="fas fa-wallet"></i> Finance
                        </button>
                        <button class="tab-link" data-tab="payout">
                            <i class="fas fa-dollar-sign"></i> Payout
                        </button>
                        <button class="tab-link" data-tab="insights">
                            <i class="fas fa-lightbulb"></i> Customer Insights
                        </button>
                    </div>

                    <div class="tab-content active" id="overview">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="margin: 0;">Annual Performance Metrics</h4>
                            <select id="year-selector" class="bel-form-control bel-form-select bel-select--inline">
                                <option value="2024">2024</option>
                                <option value="2025" selected>2025</option>
                            </select>
                        </div>
                        <div class="metric-cards-grid">
                            <div class="metric-card"><span>Total Clicks</span><strong id="modal-total-clicks">-</strong></div>
                            <div class="metric-card"><span>Total Orders</span><strong id="modal-total-orders">-</strong></div>
                            <div class="metric-card"><span>Total Revenue</span><strong id="modal-total-revenue">-</strong></div>
                            <div class="metric-card"><span>C2O CVR (%)</span><strong id="modal-conv-rate">-</strong></div>
                            <div class="metric-card"><span>AOV</span><strong id="modal-aov">-</strong></div>
                        </div>
                        
                        <!-- Performance Trend Chart -->
                        <h4 style="margin-top: 24px; margin-bottom: 4px;">Performance Trend</h4>
                        <div class="chart-container" style="height: 280px; margin-bottom: 2rem;">
                            <canvas id="bel-performance-trend-chart"></canvas>
                        </div>
                    </div>

                    <div class="tab-content" id="payouts">
                        <!-- Banking Information Section - moved to top -->
                        <h4>Banking Information 
                            <button class="bel-btn secondary" id="edit-banking-btn" style="margin-left: 10px; font-size: 0.8rem;">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="bel-btn secondary" id="banking-history-btn" style="margin-left: 5px; font-size: 0.8rem;">
                                <i class="fas fa-history"></i> History
                            </button>
                        </h4>
                        <div class="banking-info-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 24px;">
                            <div class="bel-form-group">
                                <label>Bank Name</label>
                                <div class="banking-display" id="bank-name-display">-</div>
                                <input type="text" id="bank-name-edit" class="bel-form-control bel-form-input banking-edit" style="display: none;" value="">
                            </div>
                            <div class="bel-form-group">
                                <label>SWIFT Code</label>
                                <div class="banking-display" id="swift-code-display">-</div>
                                <input type="text" id="swift-code-edit" class="bel-form-control bel-form-input banking-edit" style="display: none;" value="">
                            </div>
                            <div class="bel-form-group">
                                <label>Account Holder Name (Passport Name)</label>
                                <div class="banking-display" id="account-holder-display">-</div>
                                <input type="text" id="account-holder-edit" class="bel-form-control bel-form-input banking-edit" style="display: none;" value="">
                            </div>
                            <div class="bel-form-group">
                                <label>Phone Number</label>
                                <div class="banking-display" id="phone-display">-</div>
                                <input type="tel" id="phone-edit" class="bel-form-control bel-form-input banking-edit" style="display: none;" value="">
                            </div>
                            <div class="bel-form-group" style="grid-column: 1 / -1;">
                                <label>Address</label>
                                <div class="banking-display" id="address-display">-</div>
                                <textarea id="address-edit" class="bel-form-control bel-form-textarea banking-edit" style="display: none; min-height: 80px;"></textarea>
                            </div>
                        </div>
                        
                        <!-- Save/Cancel buttons for banking info -->
                        <div class="banking-edit-actions" style="display: none; margin-bottom: 24px;">
                            <button class="bel-btn secondary" id="cancel-banking-btn">Cancel</button>
                            <button class="bel-btn primary" id="save-banking-btn" style="margin-left: 10px;">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </div>

                    <div class="tab-content" id="payout">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4 style="margin: 0;">Annual Payouts History</h4>
                            <select id="payout-year-selector" class="bel-form-control bel-form-select bel-select--inline">
                                <!-- Years will be dynamically populated by JavaScript -->
                            </select>
                        </div>
                        
                         <div class="bel-grid-container grid-cols-3" style="margin-bottom: 12px; gap:12px;">
                            <div class="bel-card gray-bg">
                                <div class="bel-card-title">Total Gross Amount</div>
                                <div class="bel-card-value" style="font-size: 1.5rem;" id="total-gross-amount">$0.00</div>
                            </div>
                            <div class="bel-card gray-bg">
                                <div class="bel-card-title">WHT</div>
                                <div class="bel-card-value" style=" font-size: 1.5rem;" id="total-wht-amount">$0.00</div>
                            </div>
                            <div class="bel-card gray-bg">
                                <div class="bel-card-title">Total Net Amount</div>
                                <div class="bel-card-value" style="color:var(--ds-color-success); font-size: 1.5rem;" id="total-net-amount">$0.00</div>
                            </div>
                        </div>
                        <div class="scrollable-table-container" style="margin-bottom:12px ;">
                             <table class="bel-table">
                                 <thead>
                                     <tr>
                                         <th data-sortable data-type="date">Date</th>
                                         <th data-sortable data-type="number">Gross Amount</th>
                                         <th data-sortable data-type="number">WHT</th>
                                         <th data-sortable data-type="number">Net Amount</th>
                                         <th data-sortable data-type="string">Status</th>
                                     </tr>
                                 </thead>
                                 <tbody id="payout-history-tbody">
                                     <!-- Payout history will be populated by JavaScript -->
                                 </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-content" id="insights">
                        <h4>Top Purchased Categories & Products</h4>
                        <div class="tags-container">
                            <span class="insight-tag">Smart Home</span>
                            <span class="insight-tag">Sensors</span>
                            <span class="insight-tag">Industrial PC</span>
                        </div>
                        <ol class="product-list">
                            <li>Smart Lock Pro</li>
                            <li>Environment Sensor Gen 2</li>
                            <li>Smart Bulb Kit</li>
                            <li>ADAM-6017</li>
                            <li>UNO-2271G</li>
                        </ol>
                    </div>
                </div>

                <div class="modal-right-pane">
                    <h4>Management</h4>
                    <div class="bel-form-group">
                        <label for="level-adjustment">Adjust Level</label>
                        <select id="level-adjustment" class="bel-form-control bel-form-select">
                            <option value="Builder">Builder</option>
                            <option value="Enabler">Enabler</option>
                            <option value="Exploder" selected>Exploder</option>
                            <option value="Leader">Leader</option>
                        </select>
                    </div>
                     <div class="modal-actions">
                        <button class="bel-btn primary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                    
                    <hr class="divider">

                    <h4>Internal Notes</h4>
                    <div class="notes-history">
                        <div class="note-item">
                            <p>Contacted to confirm partnership interest, samples will be sent.</p>
                            <span><strong>Admin</strong> - 2025-08-15 10:30</span>
                        </div>
                        <div class="note-item">
                            <p>Observed high community engagement rate, recommend designating as a key partner.</p>
                            <span><strong>Manager</strong> - 2025-07-20 15:00</span>
                        </div>
                    </div>
                    <div class="add-note-form">
                        <textarea id="add-note-textarea" class="bel-form-control bel-form-textarea" placeholder="Add a new note..."></textarea>
                        <button id="add-note-btn" class="bel-btn secondary" style="width: 100%;">Add Note</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Application JavaScript -->
    <script src="src/js/data-loader.js"></script>
    <!-- flatpickr must be loaded before app.js to enable range picker -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="src/js/app.js"></script>
    <script>
        // Fix year selector functionality
        document.addEventListener('DOMContentLoaded', function() {
            const yearSelector = document.getElementById('year-selector');
            if (yearSelector) {
                yearSelector.addEventListener('change', function(e) {
                    const selectedYear = e.target.value;
                    // Update the performance metrics based on selected year
                    if (window.updateModalMetrics) {
                        window.updateModalMetrics(selectedYear);
                    }
                });
            }
        });
    </script>
</body>
</html>
